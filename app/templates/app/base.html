{% load static %}

<!--<!DOCTYPE html>-->
<html lang="en" data-theme="dark">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>{% block title %}Finance App{% endblock %}</title>

	<link rel="stylesheet" href="https://unpkg.com/@picocss/pico@latest/css/pico.min.css">
	<link rel="stylesheet" href="{% static 'app/css/style.css' %}">

	<script src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js" defer></script>
	<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

	{% block extra_head %}{% endblock %}
</head>
<body>

<header>
  <nav class="container" aria-label="Main navigation">
    <!-- Left links -->
    <ul class="nav-left">
      <li><a href="{% url 'dashboard' %}">Dashboard</a></li>
    </ul>

    <!-- Right links -->
    <ul class="nav-right">
      {% if user.is_authenticated %}
        <li><span>{{ user.username }}</span></li>
        <li>
  <form id="logout-form" method="post" action="{% url 'logout' %}" style="display:inline;">
    {% csrf_token %}
    <a href="#" onclick="document.getElementById('logout-form').submit(); return false;">
      Logout
    </a>
  </form>
</li>

      {% else %}
        <li><a href="{% url 'login' %}">Login</a></li>
        <li><a href="{% url 'register' %}">Register</a></li>
      {% endif %}
    </ul>
  </nav>
</header>

	<main class="container">
		{% block content %}{% endblock %}
	</main>

	<footer class="container">
		<p>&copy; 2025 Finance App</p>
	</footer>
<script>
	document.addEventListener('alpine:init', () => {
    Alpine.store('app', {
        transactions: window.initialTransactions || [],
        categories: window.initialCategories || [],
        currency: 'PLN',

        addTransaction(transaction) {
            this.transactions.unshift(transaction)
        },

        addCategory(category) {
            this.categories.push(category)
        },

        // helper for filtered categories by type
        filteredCategories(type) {
            return this.categories.filter(c => c.type === type)
        }
    })
})
</script>
	{% block extra_js %}
	{% endblock %}
</body>
</html>
